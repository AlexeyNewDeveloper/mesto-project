(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{E:()=>L});function t(e,t){return Array.from(e.querySelectorAll(t.inputSelector))}function r(e){e.classList.remove("popup_opened")}function o(e,t=null,r={needReset:!1,fillInitialValuesFields:[]}){e.classList.add("popup_opened"),r.needReset&&t.reset(),r.fillInitialValuesFields&&l(e,r.fillInitialValuesFields,L)}function n(e){!function(e){e.querySelector(".popup__close").addEventListener("click",(()=>r(e)))}(e),function(e){e.addEventListener("click",(t=>{t.target.closest(".popup__container")||r(e)}))}(e),function(e){document.addEventListener("keydown",(t=>{!function(e,t){"Escape"===e.key&&t.classList.contains("popup_opened")&&r(t)}(t,e)}))}(e)}function l(e,r=[],o=null,n=!1){const l=t(e,o);if(l.length!==r.length)return console.log(`Массивы должны быть равны по длине. \n            Сейчас popupInputs.length(${l.length} не равен \n                arrayData.length(${r.length})`),!1;if(n)for(let e=0;e<l.length;e++)r.textContent[e]=l[e].value;else for(let e=0;e<l.length;e++)l[e].value=r[e].textContent}function c(e){document.querySelector(".photo-grid__items").prepend(e.cardItem)}function i(e,t=null,r={template:"#photo-grid__item",node:".photo-grid__element-container",classOfImage:".photo-grid__image",classOfName:".photo-grid__name",classOfLike:".photo-grid__like-icon",classOfDelete:".photo-grid__delete"}){const n=(l=r.template,c=r.node,document.querySelector(l).content.querySelector(c).cloneNode(!0));var l,c;const i=n.querySelector(r.classOfImage),a=n.querySelector(r.classOfName),s=n.querySelector(r.classOfLike),d=n.querySelector(r.classOfDelete),u={cardItem:n,cardImg:i,cardName:a,likeButton:s,buttonDelete:d};var p;return u.cardImg.src=e.link,u.cardImg.alt=e.name,u.cardName.textContent=e.name,"click","photo-grid__like-icon_active",(p=u).likeButton.addEventListener("click",(function(){p.likeButton.classList.toggle("photo-grid__like-icon_active")})),function(e,t,r){t.buttonDelete.addEventListener("click",(function(e){e.target.closest(".photo-grid__element-container").remove()}))}(0,u),function(e,t,r,n){const l=t.querySelector(".popup__image"),c=t.querySelector(".popup__image-caption");r.addEventListener("click",(()=>{o(t),l.src=r.src,l.alt=r.alt,c.textContent=n.textContent}))}(0,t,u.cardImg,u.cardName),u}function a(e,r){const o=e.querySelector(r.submitButtonSelector);!function(e,r){return t(e,r).some((e=>!e.validity.valid))}(e,r)?o.disabled=!1:o.disabled=!0}function s(e,t,r){t.validity.valid?function(e,t,r){r.setErrorId=t.id;const o=e.querySelector(r.errorId);t.classList.remove(r.inputErrorClass),o.textContent="",o.classList.remove(r.errorClassActive)}(e,t,r):function(e,t,r,o){o.setErrorId=t.id;const n=e.querySelector(o.errorId);t.classList.add(o.inputErrorClass),n.textContent=r,n.classList.add(o.errorClassActive)}(e,t,t.validationMessage,r)}function d(e,r){t(e,r).forEach((t=>{t.value.length>0&&s(e,t,r)}))}const u=Array.from(document.querySelectorAll(".popup")),p=document.querySelector("#addCard"),f=document.querySelector("#editProfile"),m=document.querySelector("#editAvatar"),_=document.querySelector("#openImage"),y=p.querySelector("#formAddCard"),v=f.querySelector("#formEditPofile"),g=m.querySelector(".form"),S=document.querySelector(".profile-section__add"),h=document.querySelector(".profile-section__edit"),q=document.querySelector(".profile-section__edit-avatar"),k=document.querySelector(".profile-section__name"),E=document.querySelector(".profile-section__text"),L=(editProfile.querySelectorAll(".form__input-text")[0],editProfile.querySelectorAll(".form__input-text")[1],document.querySelector(".profile-section__edit"),{formSelector:".form",inputSelector:".form__input-text",submitButtonSelector:".form__save",inputErrorClass:"form__input-text_invalid",errorId:null,errorClassActive:"form__title-error_active",set setErrorId(e){this.errorId=`#${e}-error`}});u.forEach((function(e){n(e)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){c(i(e,_))})),y.addEventListener("submit",(e=>{!function(e,t){e.preventDefault();const r=t.querySelectorAll(".form__input-text")[1],o=t.querySelectorAll(".form__input-text")[0];c(i({link:r.value,name:o.value})),closePopup(t)}(e,p)})),v.addEventListener("submit",(e=>{!function(e,t,o,n){e.preventDefault(),l(t,[o,n],null,!0),r(t)}(e,f,k,E)})),g.addEventListener("submit",(e=>{!function(e,t){e.preventDefault();const o=document.querySelector(".profile-section__avatar"),n=t.querySelector(".form__input-text");o.src=n.value,r(t)}(e,m)})),S.addEventListener("click",(()=>{o(addCard,y,{needReset:!0}),d(y,L),a(y,L)})),h.addEventListener("click",(()=>{o(editProfile,v,{fillInitialValuesFields:[k,E]}),d(v,L),a(v,L)})),q.addEventListener("click",(()=>{o(editAvatar,g,{needReset:!0}),d(g,L),a(g,L)})),function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((r=>{!function(e,r){t(e,r).forEach((t=>{t.addEventListener("input",(()=>{a(e,r),s(e,t,r)}))}))}(r,e)}))}(L)})();