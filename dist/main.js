(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{E:()=>C});function t(e,t){return document.querySelector(e).content.querySelector(t).cloneNode(!0)}function n(e,t){return Array.from(e.querySelectorAll(t.inputSelector))}function r(e,t,n,r){var o=t.querySelector(".popup__image"),c=t.querySelector(".popup__image-caption");n.addEventListener(e,(function(){i(t),o.src=n.src,o.alt=n.alt,c.textContent=r.textContent}))}function o(e){e.classList.remove("popup_opened")}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{needReset:!1,fillInitialValuesFields:[]};e.classList.add("popup_opened"),n.needReset&&t.reset(),n.fillInitialValuesFields&&l(e,n.fillInitialValuesFields,C)}function c(e){!function(e){e.querySelector(".popup__close").addEventListener("click",(function(){return o(e)}))}(e),function(e){e.addEventListener("click",(function(t){t.target.closest(".popup__container")||o(e)}))}(e),function(e){document.addEventListener("keydown",(function(t){!function(e,t){"Escape"===e.key&&t.classList.contains("popup_opened")&&o(t)}(t,e)}))}(e)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n(e,r);if(i.length!==t.length)return console.log("Массивы должны быть равны по длине. \n            Сейчас popupInputs.length(".concat(i.length," не равен \n                arrayData.length(").concat(t.length,")")),!1;if(o)for(var c=0;c<i.length;c++)t.textContent[c]=i[c].value;else for(var l=0;l<i.length;l++)i[l].value=t[l].textContent}function a(e){document.querySelector(".photo-grid__items").prepend(e.cardItem)}function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{template:"#photo-grid__item",node:".photo-grid__element-container",classOfImage:".photo-grid__image",classOfName:".photo-grid__name",classOfLike:".photo-grid__like-icon",classOfDelete:".photo-grid__delete"},i=t(o.template,o.node),c=i.querySelector(o.classOfImage),l=i.querySelector(o.classOfName),a=i.querySelector(o.classOfLike),u=i.querySelector(o.classOfDelete),f={cardItem:i,cardImg:c,cardName:l,likeButton:a,buttonDelete:u};return f.cardImg.src=e.link,f.cardImg.alt=e.name,f.cardName.textContent=e.name,s("click",f,"photo-grid__like-icon_active"),d("click",f,".photo-grid__element-container"),r("click",n,f.cardImg,f.cardName),f}function d(e,t,n){t.buttonDelete.addEventListener(e,(function(e){e.target.closest(n).remove()}))}function s(e,t,n){t.likeButton.addEventListener(e,(function(){t.likeButton.classList.toggle(n)}))}function f(e,t){var r=e.querySelector(t.submitButtonSelector);!function(e,t){return n(e,t).some((function(e){return!e.validity.valid}))}(e,t)?r.disabled=!1:r.disabled=!0}function p(e,t,n){t.validity.valid?function(e,t,n){n.setErrorId=t.id;var r=e.querySelector(n.errorId);t.classList.remove(n.inputErrorClass),r.textContent="",r.classList.remove(n.errorClassActive)}(e,t,n):function(e,t,n,r){r.setErrorId=t.id;var o=e.querySelector(r.errorId);t.classList.add(r.inputErrorClass),o.textContent=n,o.classList.add(r.errorClassActive)}(e,t,t.validationMessage,n)}function m(e,t){n(e,t).forEach((function(n){n.value.length>0&&p(e,n,t)}))}var v=Array.from(document.querySelectorAll(".popup")),_=document.querySelector("#addCard"),y=document.querySelector("#editProfile"),g=document.querySelector("#editAvatar"),h=document.querySelector("#openImage"),S=_.querySelector("#formAddCard"),q=y.querySelector("#formEditPofile"),k=g.querySelector(".form"),E=document.querySelector(".profile-section__add"),L=document.querySelector(".profile-section__edit"),x=document.querySelector(".profile-section__edit-avatar"),I=document.querySelector(".profile-section__name"),A=document.querySelector(".profile-section__text"),C=(editProfile.querySelectorAll(".form__input-text")[0],editProfile.querySelectorAll(".form__input-text")[1],document.querySelector(".profile-section__edit"),{formSelector:".form",inputSelector:".form__input-text",submitButtonSelector:".form__save",inputErrorClass:"form__input-text_invalid",errorId:null,errorClassActive:"form__title-error_active",set setErrorId(e){this.errorId="#".concat(e,"-error")}});v.forEach((function(e){c(e)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){a(u(e,h))})),S.addEventListener("submit",(function(e){!function(e,t){e.preventDefault();var n=t.querySelectorAll(".form__input-text")[1],r=t.querySelectorAll(".form__input-text")[0];a(u({link:n.value,name:r.value})),closePopup(t)}(e,_)})),q.addEventListener("submit",(function(e){!function(e,t,n,r){e.preventDefault(),l(t,[n,r],null,!0),o(t)}(e,y,I,A)})),k.addEventListener("submit",(function(e){!function(e,t){e.preventDefault();var n=document.querySelector(".profile-section__avatar"),r=t.querySelector(".form__input-text");n.src=r.value,o(t)}(e,g)})),E.addEventListener("click",(function(){i(addCard,S,{needReset:!0}),m(S,C),f(S,C)})),L.addEventListener("click",(function(){i(editProfile,q,{fillInitialValuesFields:[I,A]}),m(q,C),f(q,C)})),x.addEventListener("click",(function(){i(editAvatar,k,{needReset:!0}),m(k,C),f(k,C)})),function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){!function(e,t){n(e,t).forEach((function(n){n.addEventListener("input",(function(){f(e,t),p(e,n,t)}))}))}(t,e)}))}(C)})();